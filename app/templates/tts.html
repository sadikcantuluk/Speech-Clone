{% extends "base.html" %}

{% block title %}Text-to-Speech - Speech & Avatar App{% endblock %}

{% block content %}
<div class="page-container">
    <div class="container">
        <div class="page-header">
            <h1><i class="fas fa-volume-up"></i> Text-to-Speech</h1>
            <p>Generate natural-sounding speech from your text</p>
        </div>

        <div class="tts-container">
            <!-- Input Section -->
            <div class="input-section card">
                <h2>Enter Your Text</h2>
                
                <div class="form-group">
                    <label for="text-input">Text to Convert</label>
                    <textarea 
                        id="text-input" 
                        class="form-control" 
                        rows="6" 
                        maxlength="1000" 
                        placeholder="Enter the text you want to convert to speech..."
                    ></textarea>
                    <small class="form-help">
                        <span id="char-count">0</span> / 1000 characters
                    </small>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="voice-select">Voice</label>
                        <select id="voice-select" class="form-control">
                            <optgroup label="OpenAI Voices">
                                <option value="alloy">Alloy (Neutral)</option>
                                <option value="echo">Echo (Male)</option>
                                <option value="fable">Fable (Warm)</option>
                                <option value="onyx">Onyx (Deep Male)</option>
                                <option value="nova">Nova (Female)</option>
                                <option value="shimmer">Shimmer (Soft Female)</option>
                            </optgroup>
                            {% if cloned_voices and cloned_voices|length > 0 %}
                            <optgroup label="ðŸŽ¤ My Cloned Voices">
                                {% for voice in cloned_voices %}
                                <option value="cloned:{{ voice.voice_id }}">{{ voice.name }} (Cloned)</option>
                                {% endfor %}
                            </optgroup>
                            {% endif %}
                        </select>
                        {% if not cloned_voices or cloned_voices|length == 0 %}
                        <small class="form-help">
                            <a href="{{ url_for('voice_clone.index') }}" style="color: var(--primary-color);">
                                <i class="fas fa-clone"></i> Clone your voice to see it here
                            </a>
                        </small>
                        {% endif %}
                    </div>

                    <div class="form-group">
                        <label for="quality-select">Quality</label>
                        <select id="quality-select" class="form-control">
                            <option value="standard">Standard</option>
                            <option value="hd">HD (Higher Quality)</option>
                        </select>
                    </div>
                </div>

                <div class="form-group">
                    <label for="translate-to-select">Speak In Language (Optional)</label>
                    <select id="translate-to-select" class="form-control">
                        <option value="">Auto Detect from Text</option>
                        <option value="en">English</option>
                        <option value="tr">Turkish</option>
                        <option value="de">German</option>
                        <option value="fr">French</option>
                        <option value="es">Spanish</option>
                        <option value="it">Italian</option>
                        <option value="pt">Portuguese</option>
                        <option value="ru">Russian</option>
                        <option value="ja">Japanese</option>
                        <option value="ko">Korean</option>
                        <option value="zh">Chinese</option>
                    </select>
                    <small class="form-help">If selected, text will be translated to this language before speech</small>
                </div>

                <button id="generate-btn" class="btn btn-primary btn-block">
                    <i class="fas fa-play"></i> Generate Speech
                </button>
            </div>

            <!-- Progress Section -->
            <div class="progress-section" id="progress-section" style="display: none;">
                <div class="spinner"></div>
                <p>Generating speech...</p>
            </div>

            <!-- Result Section -->
            <div class="result-section card" id="result-section" style="display: none;">
                <h2>Generated Speech</h2>
                
                <div class="audio-player">
                    <audio id="audio-player" controls>
                        Your browser does not support the audio element.
                    </audio>
                </div>

                <div class="result-actions">
                    <a id="download-audio-btn" class="btn btn-outline" download="speech.mp3">
                        <i class="fas fa-download"></i> Download Audio
                    </a>
                    <button id="new-generation-btn" class="btn btn-primary">
                        <i class="fas fa-plus"></i> New Generation
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/tts.js') }}"></script>
{% endblock %}

